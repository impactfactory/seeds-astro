---
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../config";
import { Picture } from "@astrojs/image/components";

// import pocketbase functionality
import { getAuthors, filePathAuthors } from "../../config_pocketbase";

// create all the routes with specific detail page props
export async function getStaticPaths() {
  return (await getAuthors()).map((author) => ({
    params: {
      slug: author.slug,
    },
    props: {
      author,
    },
  }));
}

interface Props {
  author: any;
}

const { author } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead
      title={"Portrait" + author.firstname + " " + author.lastname}
      description={author.desc}
    />
    <style>
      .title {
        font-size: 2em;
        margin: 0.25em 0 0;
      }
      hr {
        border-top: 1px solid #ddd;
        margin: 1rem 0;
      }
      .thmb {
        max-height: 100px;
        max-width: 100px;
      }
    </style>
  </head>

  <body>
    <Header />
    <main>
      <article>
        <Picture
          src={filePathAuthors(author, "img")}
          widths={[1280]}
          aspectRatio="10:4"
          sizes="(max-width: 1280px) 1280px"
          formats={["avif", "webp", "jpeg"]}
          alt={"Portrait " + author.firstname + " " + author.lastname}
          class=""
        />

        <h1 class="title">{author.firstname + " " + author.lastname}</h1>

        <hr />
        <p>{author.desc}</p>

        <!--
        <slot />-->
      </article>
    </main>
    <Footer />

    {console.log(author)}
  </body>
</html>
